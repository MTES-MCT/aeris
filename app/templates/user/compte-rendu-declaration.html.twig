{% extends "common/base_inside.html.twig" %}

{% block stylesheets %}
<style type="text/css">

.recap-declaration-dechets ul {
    list-style: square;
    padding-left: 2em;
}
body{
  overflow-x: scroll !important;
}
    </style>
{% endblock %}

{% block body %}
  <section class="section">
    <div class="container" >
      {% if declaration.declarationMonth %}
    <h2 class="title is-2">Déclaration concernant les rejets durant {{ declaration.declarationMonth|date('m/Y') }} </h2>
    Déclaration effectuée le {{ declaration.createdAt|date('d/m/Y') }}
    {% else %}
    <h2 class="title is-2">Déclaration du {{ declaration.createdAt|date('d/m/Y') }} </h2>
    {% endif %}

    <div class="recap-declaration-dechets">
        {% if declaration.declarationDechets %}
          <h3 class="title is-3">Déchets</h3>
          <ul>
              <li>
              {{ declaration.declarationDechets.qtiteIncinereeTotale }} T de déchets incinérés, dont:

              <ul>
                  <li>{{ declaration.declarationDechets.qtiteIncinereeDechetsDasri }}T DASRI</li>
                  <li>{{ declaration.declarationDechets.qtiteIncinereeDechetsDangereux }}T de déchets dangereux</li>
                  <li>{{ declaration.declarationDechets.qtiteIncinereeDechetsNonDangereux }}T de déchets non dangereux, dont
                      <ul>
                          <li>{{ declaration.declarationDechets.qtiteIncinereeDechetsNonDangereuxMenagers }}T de déchets ménagers
                          </li>
                          <li>{{ declaration.declarationDechets.qtiteIncinereeDechetsNonDangereuxRefusTri }}T de refus de tri
                          </li>
                          <li>{{ declaration.declarationDechets.qtiteIncinereeDechetsNonDangereuxDae }}T de déchets DAE non dangereux</li>
                      </ul>
                  </li>
              </ul>
              </li>
          </ul>
        {% endif %}


        {% if not declaration.declarationsFonctionnementLigne is empty %}
          {% for declarationLigne in declaration.declarationsFonctionnementLigne %}
          <h3 class="title is-3">Ligne n° {{ declarationLigne.ligne.numero }}</h3>
          
              <h4 class="title is-4">Déclaration générale</h4>

              <table class="table" >
                <tbody>
                  {#<tr>
                    <td>Nombre d'heures de fonctionnement théoriques</td>
                    <td>{{ declarationLigne.nbHeuresFonctionnementTh }}</td>
                  </tr>#}
                  <tr>
                    <td>Nombre d'heures de fonctionnement réelles</td>
                    <td>{{ declarationLigne.nbHeuresFonctionnementReel }}</td>
                  </tr>
                </tbody>
              </table>

              <h4 class="title is-4">Mesures continues</h3>
              
              <table class="table">
                <tbody>
                  {% if declarationLigne.declarationCompteursFilename != null %}
                  <tr>
                    <td>Compteurs</td>
                    <td><a href="{{ vich_uploader_asset(declarationLigne, 'declarationCompteursFile') }}" alt="" >Télécharger</a></td>
                  </tr>
                  {% endif %}
                  {% if declarationLigne.declarationFluxFilename != null %}
                  <tr>
                    <td>Flux</td>
                    <td><a href="{{ vich_uploader_asset(declarationLigne, 'declarationFluxFile') }}" alt="" >Télécharger</a></td>
                  </tr>
                  {% endif %}
                  {% if declarationLigne.declarationConcentrationsFilename != null %}
                  <tr>
                    <td>Concentrations et températures</td>
                    <td><a href="{{ vich_uploader_asset(declarationLigne, 'declarationConcentrationsFile') }}" alt="" >Télécharger</a></td>
                  </tr>
                  {% endif %}
                </tbody>
              </table>

              {#
              {% if reports[declarationLigne.ligne.numero] != null %}
                
                <table class="table">
                <thead>
                <tr>
                  <th>Jour</th>
                  {% for k,v in reports[declarationLigne.ligne.numero].dailyData[1] %}
                  <th>{{ k }}</th>
                  {% endfor %}
                </tr>
                </thead>
                <tbody>
                  
                {% for day,report in reports[declarationLigne.ligne.numero].dailyData %}
                  <tr>
                    <td>{{ day }}</td>
                    {% for v in report %}
                    <td>{{ v }}</td>
                    {% endfor %}
                  </tr>
                {% endfor %}

                </tbody>
                </table>
              {% endif %}
              #}

          {% endfor %}
        {% endif %}
    </div>

    </div>
  </section>
{% endblock %}